<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book</title>
    <link th:replace="fragments :: bootstrapCSS">
    <link th:replace="fragments :: fontAwesomeCSS">
    <link th:replace="fragments :: headerCSS">
    <link th:replace="fragments :: starCSS">
    <link rel="stylesheet" th:href="@{/static/template/book.css}">
</head>
<body>
    <header th:include="fragments :: header"></header>

    <div class="container" id="wrapper">
        <div class="row">
            <div class="col-sm-8">
                <div class="row my-sm-3">
                    <div class="col-sm-12">
                        <h3 id="bookName" th:text="${bookPage.bookName}"></h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3">
                        <!-- XXX IDEA语法错误的错误提示 -->
                        <img class="bookImg" th:if="${bookPage.picture == null}" th:src="@{/static/pic/bookDefault.gif}">
                        <img class="bookImg" th:if="${bookPage.picture != null}" th:src="@{/static/picture/books/{bookItemPicture}(bookItemPicture=${bookPage.picture})}">
                        <p>Update information</p>
                    </div>
                    <div class="col-sm-6 px-sm-0" id="bookInfo">
                        <p th:if="${bookPage.authorName}">Author: <span th:text="${bookPage.authorName}"></span></p>
                        <p th:if="${bookPage.publisher}">Publisher: <span th:text="${bookPage.publisher}"></span></p>
                        <p th:if="${bookPage.originalName}">Original: <span th:text="${bookPage.originalName}"></span></p>
                        <p th:if="${bookPage.translatorName}">Translator: <span th:text="${bookPage.translatorName}"></span></p>
                        <p th:if="${bookPage.publicationDate}">Publication: <span th:text="${bookPage.publicationDate}"></span></p>
                        <p th:if="${bookPage.page}">Page: <span th:text="${bookPage.page}"></span></p>
                        <p th:if="${bookPage.price}">Price: <span th:text="${bookPage.price}"></span></p>
                        <p th:if="${bookPage.binding}">Binding: <span th:text="${bookPage.binding}"></span></p>
                        <p th:if="${bookPage.isbn}">ISBN: <span th:text="${bookPage.isbn}"></span></p>
                    </div>
                    <div class="col-sm-3" id="ratingInfo">
                        <div class="row">
                            <div class="col-sm-12">
                                <span id="ratingTitle">Greenbean Rating</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4" th:if="${bookPage.rating}">
                                <span id="ratingScore" th:text="${bookPage.rating}"></span>
                            </div>
                            <div class="col-sm-8" id="ratingRight">
                                <div id="ratingStar" th:classappend="'bigStar' + ${bookPage.starClassName}"></div>
                                <div th:if="${#conversions.convert(bookPage.ratingCount, 'java.lang.Integer') > 0}" class="ratingCount"><span th:text="${bookPage.ratingCount}"></span> Ratings</div>
                                <div th:if="${#conversions.convert(bookPage.ratingCount, 'java.lang.Integer') == 0}" class="ratingCount">No ratings</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12" id="ratingPowerColumn">
                                <div class="row" th:each="percentage, iterator : ${bookPage.ratingPercentageList}">
                                    <div class="col-sm-4 starTitle">
                                        <span th:text="${5 - iterator.index}"></span><span th:text="${iterator.last} ? ' star' : ' stars'"></span>
                                    </div>
                                    <div class="col-sm-5 px-sm-0">
                                        <div class="ratingPower" th:styleappend="'width: ' + ${bookPage.ratingPowerWidthPercentageList[iterator.index]}"></div>
                                    </div>
                                    <div class="col-sm-3 starPercentage">
                                        <span th:text="${percentage}"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row my-sm-5" id="ratingOperation">
                    <div class="col-sm-12" id="ratingButton">
                        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#ratingDialog" data-status="am reading">Reading</button>
                        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#ratingDialog" data-status="have read">Read</button>
                        <span class="ratingButtonText">Rating:</span>
                        <span id="ratingClickStar" th:attr="data-hollow=@{/static/pic/singleHollowStar.png}, data-solid=@{/static/pic/singleSolidStar.png}" data-rating="2">
                            <a th:each="i : ${#numbers.sequence(1, 5)}" data-toggle="modal" data-target="#ratingDialog" data-status="have read">
                                <img th:src="@{/static/pic/singleHollowStar.png}" th:attr="data-index=${i}" >
                            </a>
                        </span>
                        <span class="ratingButtonText" id="ratingIntroText"></span>
                    </div>
                </div>
                <div class="row introduction" th:if="${bookPage.contentIntro}">
                    <div class="col-sm-12">
                        <h4>Content introduction· · · · · ·</h4>
                        <div>
                            <p th:each="item : ${bookPage.contentIntro}" th:text="${item}"></p>
                        </div>
                    </div>
                </div>
                <div class="row introduction">
                    <div class="col-sm-12" th:if="${bookPage.authorIntro}">
                        <h4>Author introduction· · · · · ·</h4>
                        <div>
                            <p th:each="item : ${bookPage.authorIntro}" th:text="${item}"></p>
                        </div>
                    </div>
                </div>
                <div class="row introduction">
                    <div class="col-sm-12" th:if="${bookPage.directory}">
                        <h4>Contents· · · · · ·</h4>
                        <div>
                            <p id="directory" th:each="item : ${bookPage.directory}" th:text="${item}"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-4">

            </div>
        </div>


    </div>
    <div class="modal fade" id="ratingDialog" tabindex="-1" role="dialog" aria-labelledby="ratingDialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">I <span></span> this book. Add a rating.</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div>
                        <span class="ratingButtonText">Rating(Optional):</span>
                        <span id="dialogRatingClickStar" th:attr="data-hollow=@{/static/pic/singleHollowStar.png}, data-solid=@{/static/pic/singleSolidStar.png}" data-rating="2">
                            <a th:each="i : ${#numbers.sequence(1, 5)}" data-status="have read">
                                <img th:src="@{/static/pic/singleHollowStar.png}" th:attr="data-index=${i}" >
                            </a>
                        </span>
                        <span class="ratingButtonText" id="dialogRatingIntroText"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <script th:replace="fragments :: jQueryJS"></script>
    <script th:replace="fragments :: popperJS"></script>
    <script th:replace="fragments :: bootstrapJS"></script>
    <script th:replace="fragments :: headerJS"></script>
    <script th:src="@{/static/template/book.js}"></script>
</body>
</html>